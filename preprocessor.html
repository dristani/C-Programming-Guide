<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Preprocessor - C Programming Tutorial</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        body {
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        header {
            background-color: #2c3e50;
            color: white;
            padding: 2rem 0;
            text-align: center;
            margin-bottom: 2rem;
        }
        .content {
            background: white;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        h1, h2, h3 {
            color: #2c3e50;
            margin-bottom: 1rem;
        }
        p {
            margin-bottom: 1rem;
        }
        pre {
            background-color: #f8f9fa;
            padding: 1rem;
            border-radius: 4px;
            overflow-x: auto;
            margin: 1rem 0;
        }
        code {
            font-family: 'Courier New', Courier, monospace;
            color: #2c3e50;
        }
        .nav-links {
            margin-top: 2rem;
            text-align: center;
        }
        .nav-links a {
            display: inline-block;
            background-color: #3498db;
            color: white;
            padding: 8px 16px;
            border-radius: 4px;
            text-decoration: none;
            margin: 0 10px;
            transition: background-color 0.3s ease;
        }
        .nav-links a:hover {
            background-color: #2980b9;
        }
        .faq {
            background-color: #e8f4f8;
            padding: 1rem;
            border-radius: 4px;
            margin-top: 2rem;
        }
        .faq h3 {
            color: #2c3e50;
        }
        ul {
            margin-left: 1.5rem;
            margin-bottom: 1rem;
        }
        li {
            margin-bottom: 0.5rem;
        }
        .faq-item {
            margin-bottom: 1rem;
        }
        .faq-question {
            font-weight: bold;
            color: #2c3e50;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1>24. Preprocessor</h1>
            <p>Understanding the C preprocessor</p>
        </div>
    </header>

    <div class="container">
        <div class="content">
            <h2>Introduction to Preprocessor</h2>
            <p>The C preprocessor is a macro processor that transforms your program before it is compiled. It handles directives that begin with #, such as #include, #define, #ifdef, etc. The preprocessor performs text substitution, file inclusion, and conditional compilation.</p>

            <h2>Preprocessor Directives</h2>
            <table>
                <tr>
                    <th>Directive</th>
                    <th>Description</th>
                    <th>Example</th>
                </tr>
                <tr>
                    <td>#include</td>
                    <td>Includes header files</td>
                    <td><code>#include &lt;stdio.h&gt;</code></td>
                </tr>
                <tr>
                    <td>#define</td>
                    <td>Defines macros</td>
                    <td><code>#define PI 3.14159</code></td>
                </tr>
                <tr>
                    <td>#ifdef/#ifndef</td>
                    <td>Conditional compilation</td>
                    <td><code>#ifdef DEBUG</code></td>
                </tr>
                <tr>
                    <td>#if/#elif/#else</td>
                    <td>Conditional compilation</td>
                    <td><code>#if VERSION == 2</code></td>
                </tr>
                <tr>
                    <td>#undef</td>
                    <td>Undefines macros</td>
                    <td><code>#undef PI</code></td>
                </tr>
                <tr>
                    <td>#pragma</td>
                    <td>Implementation-specific directives</td>
                    <td><code>#pragma once</code></td>
                </tr>
            </table>

            <h2>Example Program</h2>
            <pre><code>#include &lt;stdio.h&gt;

// Simple macro definitions
#define PI 3.14159
#define SQUARE(x) ((x) * (x))
#define MAX(a, b) ((a) > (b) ? (a) : (b))

// Conditional compilation
#define DEBUG 1
#define VERSION 2

// Function-like macro with multiple lines
#define PRINT_ARRAY(arr, size) do { \
    printf("Array elements: "); \
    for(int i = 0; i < size; i++) \
        printf("%d ", arr[i]); \
    printf("\n"); \
} while(0)

int main() {
    // Using simple macros
    double radius = 5.0;
    printf("Area of circle: %.2f\n", PI * SQUARE(radius));
    
    int a = 10, b = 20;
    printf("Maximum of %d and %d is %d\n", a, b, MAX(a, b));
    
    // Using DEBUG macro
    #ifdef DEBUG
    printf("Debug mode is enabled\n");
    #endif
    
    // Using VERSION macro
    #if VERSION == 1
    printf("Running version 1\n");
    #elif VERSION == 2
    printf("Running version 2\n");
    #else
    printf("Unknown version\n");
    #endif
    
    // Using PRINT_ARRAY macro
    int numbers[] = {1, 2, 3, 4, 5};
    PRINT_ARRAY(numbers, 5);
    
    // Stringification example
    #define STR(x) #x
    printf("Stringified: %s\n", STR(Hello World));
    
    // Token pasting example
    #define CONCAT(a, b) a##b
    int xy = 100;
    printf("Concatenated: %d\n", CONCAT(x, y));
    
    return 0;
}</code></pre>

            <h2>Code Explanation</h2>
            <ul>
                <li><code>#define PI 3.14159</code> - Simple constant macro</li>
                <li><code>#define SQUARE(x)</code> - Function-like macro with parentheses</li>
                <li><code>#define MAX(a, b)</code> - Macro with multiple parameters</li>
                <li><code>#ifdef DEBUG</code> - Conditional compilation</li>
                <li><code>#if VERSION == 2</code> - Version checking</li>
                <li><code>PRINT_ARRAY</code> - Multi-line macro using do-while</li>
                <li><code>#define STR(x)</code> - Stringification operator</li>
                <li><code>#define CONCAT(a, b)</code> - Token pasting operator</li>
            </ul>

            <h2>Preprocessor Characteristics</h2>
            <ul>
                <li>Text-based substitution</li>
                <li>Runs before compilation</li>
                <li>No type checking</li>
                <li>Can create complex macros</li>
                <li>Supports conditional compilation</li>
                <li>Can include other files</li>
                <li>Can define constants and functions</li>
            </ul>

            <h2>Preprocessor Best Practices</h2>
            <ul>
                <li>Use parentheses in macro definitions</li>
                <li>Avoid complex macros when possible</li>
                <li>Use descriptive macro names</li>
                <li>Document macro behavior</li>
                <li>Use include guards</li>
                <li>Be careful with macro side effects</li>
                <li>Consider using const instead of #define</li>
            </ul>

            <div class="faq">
                <h3>Frequently Asked Questions</h3>
                
                <div class="faq-item">
                    <p class="faq-question">Q: What is the difference between #define and const?</p>
                    <p>A: #define is a preprocessor directive that performs text substitution before compilation, while const is a C keyword that creates a typed constant. const provides type safety and scope rules, while #define is more flexible but can lead to unexpected behavior.</p>
                </div>

                <div class="faq-item">
                    <p class="faq-question">Q: What are include guards?</p>
                    <p>A: Include guards prevent multiple inclusion of the same header file. They use #ifndef, #define, and #endif to ensure that the contents of a header file are included only once in a translation unit.</p>
                </div>

                <div class="faq-item">
                    <p class="faq-question">Q: What is the purpose of the #pragma directive?</p>
                    <p>A: #pragma provides a way to give special instructions to the compiler. It's implementation-specific and can be used for various purposes like controlling optimization, suppressing warnings, or specifying alignment requirements.</p>
                </div>

                <div class="faq-item">
                    <p class="faq-question">Q: When should I use macros versus functions?</p>
                    <p>A: Use macros for simple text substitution, constant definitions, and conditional compilation. Use functions for complex operations, when type safety is important, or when you need to avoid macro side effects. Functions are generally safer but macros can be more efficient for simple operations.</p>
                </div>
            </div>

            <div class="nav-links">
                <a href="index.html">Back to Home</a>
                <a href="error-handling.html">Next: Error Handling</a>
            </div>
        </div>
    </div>
</body>
</html> 